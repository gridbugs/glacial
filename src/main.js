import './populate_namespaces.js';

import {initGlobals} from './globals.js';

import {GlobalDrawer} from './global_drawer.js';
import {Tiles} from './tiles.js';

import {StringTerrainGenerator} from './string_terrain_generator.js';
import {EcsContext} from './ecs_context.js';

export async function main() {
    await initGlobals();

    var drawer = GlobalDrawer.Drawer;


    var terrainStringArray = [
'&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&',
'&                                               &                       &',
'&  &             &   &  &&               &              &&              &',
'&   &      &         & &        ######################    &&&&&     &&  &',
'&    &                          #....................#        &&&    && &',
'&      &      ###################....................#     &          &&&',
'&      &      #........#........#....................#           &      &',
'& &   &       #........#........#....................#            &     &',
'&             #........#........#....................#             &    &',
'& &           #.................#........@...........+                  &',
'&             #........#........#..>.................#   &   &        & &',
'&     #############.####........#....................#             &    &',
'&     #................#.............................#           &      &',
'&   & #.........................#....................#                  &',
'&     #................#........#....................#    &     & &     &',
'&     #................#........#....................#                  &',
'&  &  .................#........#....................#          & &     &',
'&     #................#........#....................#      &         & &',
'&  &  #................###############.###############      &           &',
'&     #................#...................#                            &',
'&     #................#...................#               &   &     &  &',
'&     ##################...................#            % %%%%          &',
'&                      #...................#          & %,,,,%          &',
'&   & &  &             #....................      &     %,,,,% &    &   &',
'&         &            #...................#       &  & %%%%%%      &   &',
'&    &&  & &        &  #...................#        &       &           &',
'&     &    &        &  #...................#                  &     &   &',
'&      &    &&&        #####################                        &   &',
'&                                                                       &',
'&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&',
    ];

    var generator = new StringTerrainGenerator(terrainStringArray);
    var ecs = new EcsContext();

    console.log('generating...');
    generator.generate(ecs);
    console.log('done');
    console.debug(ecs);
}
